(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".footer__form"),t=document.querySelector(".footer__title");function n(e){e.classList.add("error")}function o(e){e.classList.remove("error")}function r(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(s){s.preventDefault();let a=function(e){let t=0,s=document.querySelectorAll(".form-required");for(let e=0;e<s.length;e++){const a=s[e];o(a),a.classList.contains("email")?r(a)&&(n(a),t++):""===a.value&&(n(a),t++)}return t}(),l=new FormData(e);if(0===a){e.classList.add("sending");let n=await fetch("../sendmail.php",{method:"POST",body:l});if(n.ok){let o=await n.json();alert(o.message),e.reset(),e.classList.remove("sending"),t.textContent="Супер!",e.innerHTML='<p class="footer__success-text">Нам ушло уведомление! Как только мы его получим, сразу выйдем на связь для уточнения деталей.</p>'}else alert("Ошибка"),e.classList.remove("sending")}else alert("Заполните обязательные поля")}))})),window.addEventListener("DOMContentLoaded",(function(){[].forEach.call(document.querySelectorAll(".phone"),(function(e){var t;function n(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var n="+7 (___) ___ ____",o=0,r=n.replace(/\D/g,""),s=this.value.replace(/\D/g,""),a=n.replace(/[_\d]/g,(function(e){return o<s.length?s.charAt(o++)||r.charAt(o):e}));-1!=(o=a.indexOf("_"))&&(o<5&&(o=3),a=a.slice(0,o));var l=n.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",n,!1),e.addEventListener("focus",n,!1),e.addEventListener("blur",n,!1),e.addEventListener("keydown",n,!1)}))}))})();